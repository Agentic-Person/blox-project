# Agent 3: UI Engineer
> Frontend Components for AI-Powered Learning System Integration
> **Agent Role**: React UI Components & User Experience
> **Time Allocation**: 3 hours
> **Dependencies**: Can start with mock data, integrate with Agent 1/2 types later

---

## 🎯 Mission Statement

You are responsible for creating the user interface components that bring the AI-powered learning system integration to life. Focus on building intuitive, responsive React components that seamlessly connect video content with todo management and scheduling features.

---

## 📋 Task List

### Task 3.1: Enhanced Chat Interface (1 hour)
**File**: `src/components/chat/EnhancedChatMessage.tsx`

Build the enhanced chat message component with todo/calendar actions:

```tsx
import React, { useState } from 'react'
import { Button } from '@/components/ui/button'
import { Card, CardContent } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import { Calendar, CheckSquare, Play, Clock, BookOpen } from 'lucide-react'
import type { 
  UnifiedChatResponse, 
  UnifiedVideoReference,
  TodoSuggestion,
  CalendarAction 
} from '@/types/shared'

interface EnhancedChatMessageProps {
  message: UnifiedChatResponse
  onCreateTodo?: (suggestion: TodoSuggestion) => void
  onScheduleVideo?: (video: UnifiedVideoReference) => void
  onAddToLearningPath?: (video: UnifiedVideoReference) => void
  onWatchVideo?: (video: UnifiedVideoReference) => void
}

export const EnhancedChatMessage: React.FC<EnhancedChatMessageProps> = ({
  message,
  onCreateTodo,
  onScheduleVideo,
  onAddToLearningPath,
  onWatchVideo
}) => {
  const [expandedVideo, setExpandedVideo] = useState<string | null>(null)

  return (
    <div className="space-y-4 p-4 bg-white dark:bg-gray-800 rounded-lg border">
      {/* Main Message Content */}
      <div className="prose prose-sm max-w-none dark:prose-invert">
        <p className="text-gray-900 dark:text-gray-100">{message.answer}</p>
      </div>

      {/* Video References with Actions */}
      {message.videoReferences && message.videoReferences.length > 0 && (
        <div className="space-y-3">
          <h4 className="text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
            <Play className="h-4 w-4" />
            Referenced Videos ({message.videoReferences.length})
          </h4>
          
          {message.videoReferences.map((video, index) => (
            <VideoCard
              key={`${video.youtubeId}-${index}`}
              video={video}
              expanded={expandedVideo === video.youtubeId}
              onToggleExpand={() => 
                setExpandedVideo(expandedVideo === video.youtubeId ? null : video.youtubeId)
              }
              onCreateTodo={() => {
                const suggestion: TodoSuggestion = {
                  title: `Watch: ${video.title}`,
                  description: `Learn from ${video.title}${video.timestamp ? ` starting at ${video.timestamp}` : ''}`,
                  priority: 'medium',
                  category: 'learn',
                  estimatedMinutes: video.duration ? Math.ceil(video.duration / 60) : 30,
                  videoReferences: [video],
                  autoGenerated: true,
                  confidence: video.confidence || 0.8
                }
                onCreateTodo?.(suggestion)
              }}
              onSchedule={() => onScheduleVideo?.(video)}
              onAddToPath={() => onAddToLearningPath?.(video)}
              onWatch={() => onWatchVideo?.(video)}
            />
          ))}
        </div>
      )}

      {/* AI-Generated Todo Suggestions */}
      {message.suggestedTodos && message.suggestedTodos.length > 0 && (
        <div className="space-y-3">
          <h4 className="text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
            <CheckSquare className="h-4 w-4" />
            Suggested Tasks ({message.suggestedTodos.length})
          </h4>
          
          {message.suggestedTodos.map((todo, index) => (
            <TodoSuggestionCard
              key={index}
              suggestion={todo}
              onAccept={() => onCreateTodo?.(todo)}
              onCustomize={() => {
                // TODO: Open customization modal
                console.log('Customize todo:', todo)
              }}
            />
          ))}
        </div>
      )}

      {/* Calendar Scheduling Actions */}
      {message.schedulingActions && message.schedulingActions.length > 0 && (
        <div className="space-y-3">
          <h4 className="text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
            <Calendar className="h-4 w-4" />
            Scheduling Options ({message.schedulingActions.length})
          </h4>
          
          {message.schedulingActions.map((action, index) => (
            <SchedulingCard
              key={index}
              action={action}
              onSchedule={() => {
                // TODO: Implement scheduling logic
                console.log('Schedule action:', action)
              }}
            />
          ))}
        </div>
      )}

      {/* Suggested Questions */}
      {message.suggestedQuestions && message.suggestedQuestions.length > 0 && (
        <div className="space-y-2">
          <h4 className="text-sm font-semibold text-gray-700 dark:text-gray-300">
            Related Questions
          </h4>
          <div className="flex flex-wrap gap-2">
            {message.suggestedQuestions.map((question, index) => (
              <Button
                key={index}
                variant="outline"
                size="sm"
                className="text-xs"
                onClick={() => {
                  // TODO: Implement question click
                  console.log('Ask question:', question)
                }}
              >
                {question}
              </Button>
            ))}
          </div>
        </div>
      )}

      {/* Response Metadata */}
      <div className="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 pt-2 border-t">
        <span>Response time: {message.responseTime}ms</span>
        <div className="flex items-center gap-2">
          {message.metadata.cacheHit && (
            <Badge variant="secondary" className="text-xs">Cached</Badge>
          )}
          <span>Confidence: {Math.round(message.metadata.confidence * 100)}%</span>
        </div>
      </div>
    </div>
  )
}

// Video Card Component
interface VideoCardProps {
  video: UnifiedVideoReference
  expanded: boolean
  onToggleExpand: () => void
  onCreateTodo: () => void
  onSchedule: () => void
  onAddToPath: () => void
  onWatch: () => void
}

const VideoCard: React.FC<VideoCardProps> = ({
  video,
  expanded,
  onToggleExpand,
  onCreateTodo,
  onSchedule,
  onAddToPath,
  onWatch
}) => (
  <Card className="border border-gray-200 dark:border-gray-700">
    <CardContent className="p-3">
      <div className="flex gap-3">
        {/* Thumbnail */}
        <div className="flex-shrink-0">
          <img
            src={video.thumbnailUrl}
            alt={video.title}
            className="w-24 h-18 rounded object-cover cursor-pointer hover:opacity-80"
            onClick={onWatch}
          />
        </div>
        
        {/* Content */}
        <div className="flex-1 min-w-0">
          <h5 className="font-medium text-sm text-gray-900 dark:text-gray-100 line-clamp-2">
            {video.title}
          </h5>
          
          {video.timestamp && (
            <p className="text-xs text-gray-600 dark:text-gray-400 mt-1 flex items-center gap-1">
              <Clock className="h-3 w-3" />
              Relevant at {video.timestamp}
            </p>
          )}
          
          {video.confidence && (
            <div className="mt-1">
              <Badge 
                variant={video.confidence > 0.8 ? "default" : "secondary"}
                className="text-xs"
              >
                {Math.round(video.confidence * 100)}% match
              </Badge>
            </div>
          )}
          
          {expanded && video.relevantSegment && (
            <p className="text-xs text-gray-600 dark:text-gray-400 mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded">
              "{video.relevantSegment.substring(0, 200)}..."
            </p>
          )}
        </div>
        
        {/* Actions */}
        <div className="flex-shrink-0 flex flex-col gap-1">
          <Button size="sm" variant="outline" onClick={onWatch}>
            <Play className="h-3 w-3 mr-1" />
            Watch
          </Button>
          <Button size="sm" variant="ghost" onClick={onCreateTodo}>
            <CheckSquare className="h-3 w-3 mr-1" />
            Todo
          </Button>
          <Button size="sm" variant="ghost" onClick={onSchedule}>
            <Calendar className="h-3 w-3 mr-1" />
            Schedule
          </Button>
          <Button size="sm" variant="ghost" onClick={onAddToPath}>
            <BookOpen className="h-3 w-3 mr-1" />
            Path
          </Button>
        </div>
      </div>
      
      {/* Toggle expand for more details */}
      <Button
        variant="ghost"
        size="sm"
        onClick={onToggleExpand}
        className="w-full mt-2 text-xs"
      >
        {expanded ? 'Show Less' : 'Show More'}
      </Button>
    </CardContent>
  </Card>
)

// Todo Suggestion Card Component
interface TodoSuggestionCardProps {
  suggestion: TodoSuggestion
  onAccept: () => void
  onCustomize: () => void
}

const TodoSuggestionCard: React.FC<TodoSuggestionCardProps> = ({
  suggestion,
  onAccept,
  onCustomize
}) => (
  <Card className="border-dashed border-blue-200 dark:border-blue-800 bg-blue-50/30 dark:bg-blue-900/10">
    <CardContent className="p-3">
      <div className="flex justify-between items-start gap-3">
        <div className="flex-1 min-w-0">
          <h5 className="font-medium text-sm text-gray-900 dark:text-gray-100">
            {suggestion.title}
          </h5>
          {suggestion.description && (
            <p className="text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2">
              {suggestion.description}
            </p>
          )}
          <div className="flex items-center gap-2 mt-2">
            <Badge variant="outline" className="text-xs">
              {suggestion.category}
            </Badge>
            <Badge variant="outline" className="text-xs">
              {suggestion.priority}
            </Badge>
            <span className="text-xs text-gray-500">
              ~{suggestion.estimatedMinutes} min
            </span>
          </div>
        </div>
        
        <div className="flex gap-2">
          <Button size="sm" onClick={onAccept}>
            Accept
          </Button>
          <Button size="sm" variant="outline" onClick={onCustomize}>
            Customize
          </Button>
        </div>
      </div>
    </CardContent>
  </Card>
)

// Scheduling Card Component
interface SchedulingCardProps {
  action: CalendarAction
  onSchedule: () => void
}

const SchedulingCard: React.FC<SchedulingCardProps> = ({
  action,
  onSchedule
}) => (
  <Card className="border-dashed border-green-200 dark:border-green-800 bg-green-50/30 dark:bg-green-900/10">
    <CardContent className="p-3">
      <div className="flex justify-between items-start gap-3">
        <div className="flex-1 min-w-0">
          <h5 className="font-medium text-sm text-gray-900 dark:text-gray-100">
            {action.title}
          </h5>
          {action.description && (
            <p className="text-xs text-gray-600 dark:text-gray-400 mt-1">
              {action.description}
            </p>
          )}
          <div className="flex items-center gap-2 mt-2">
            <Clock className="h-3 w-3 text-gray-500" />
            <span className="text-xs text-gray-500">
              {action.duration} minutes
            </span>
            {action.startTime && (
              <span className="text-xs text-gray-500">
                • {new Date(action.startTime).toLocaleString()}
              </span>
            )}
          </div>
        </div>
        
        <Button size="sm" onClick={onSchedule}>
          <Calendar className="h-3 w-3 mr-1" />
          Schedule
        </Button>
      </div>
    </CardContent>
  </Card>
)
```

### Task 3.2: Todo Detail with Video Links (1 hour)
**File**: `src/components/todo/TodoDetailWithVideo.tsx`

Enhanced todo detail view showing linked videos:

```tsx
import React, { useState } from 'react'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import { Button } from '@/components/ui/button'
import { Progress } from '@/components/ui/progress'
import { Separator } from '@/components/ui/separator'
import { 
  Play, 
  Clock, 
  CheckCircle2, 
  Circle,
  Calendar,
  BookOpen,
  ExternalLink,
  Lightbulb,
  Target
} from 'lucide-react'
import type { 
  Todo, 
  UnifiedVideoReference 
} from '@/types/shared'

interface TodoDetailWithVideoProps {
  todo: Todo
  onUpdateTodo?: (updates: Partial<Todo>) => void
  onWatchVideo?: (video: UnifiedVideoReference, startTime?: string) => void
  onScheduleVideo?: (video: UnifiedVideoReference) => void
  onMarkComplete?: () => void
}

export const TodoDetailWithVideo: React.FC<TodoDetailWithVideoProps> = ({
  todo,
  onUpdateTodo,
  onWatchVideo,
  onScheduleVideo,
  onMarkComplete
}) => {
  const [expandedVideo, setExpandedVideo] = useState<string | null>(null)
  
  const videoRefs = todo.videoReferences || []
  const progress = todo.actualMinutes && todo.estimatedMinutes 
    ? Math.min(100, (todo.actualMinutes / todo.estimatedMinutes) * 100)
    : todo.status === 'completed' ? 100 : 0

  return (
    <div className="space-y-6">
      {/* Todo Header */}
      <Card>
        <CardHeader>
          <div className="flex justify-between items-start gap-4">
            <div className="flex-1 min-w-0">
              <CardTitle className="text-lg flex items-center gap-2">
                {todo.status === 'completed' ? (
                  <CheckCircle2 className="h-5 w-5 text-green-600" />
                ) : (
                  <Circle className="h-5 w-5 text-gray-400" />
                )}
                {todo.title}
              </CardTitle>
              {todo.description && (
                <p className="text-sm text-gray-600 dark:text-gray-400 mt-2">
                  {todo.description}
                </p>
              )}
            </div>
            
            <div className="flex items-center gap-2">
              <Badge variant={getPriorityVariant(todo.priority)}>
                {todo.priority}
              </Badge>
              <Badge variant="outline">
                {todo.category || 'General'}
              </Badge>
            </div>
          </div>
        </CardHeader>
        
        <CardContent>
          {/* Progress and Time Tracking */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
              <div className="flex justify-between text-sm mb-2">
                <span className="text-gray-600 dark:text-gray-400">Progress</span>
                <span className="font-medium">{Math.round(progress)}%</span>
              </div>
              <Progress value={progress} className="h-2" />
            </div>
            
            <div>
              <div className="flex items-center gap-2 text-sm">
                <Clock className="h-4 w-4 text-gray-500" />
                <span className="text-gray-600 dark:text-gray-400">
                  {todo.actualMinutes || 0} / {todo.estimatedMinutes || 0} min
                </span>
              </div>
            </div>
            
            <div>
              {todo.dueDate && (
                <div className="flex items-center gap-2 text-sm">
                  <Calendar className="h-4 w-4 text-gray-500" />
                  <span className="text-gray-600 dark:text-gray-400">
                    Due {new Date(todo.dueDate).toLocaleDateString()}
                  </span>
                </div>
              )}
            </div>
          </div>
          
          {/* Action Buttons */}
          <div className="flex gap-2">
            {todo.status !== 'completed' && (
              <Button onClick={onMarkComplete}>
                <CheckCircle2 className="h-4 w-4 mr-2" />
                Mark Complete
              </Button>
            )}
            
            {videoRefs.length > 0 && (
              <Button 
                variant="outline"
                onClick={() => onWatchVideo?.(videoRefs[0], videoRefs[0].timestamp)}
              >
                <Play className="h-4 w-4 mr-2" />
                Start Learning
              </Button>
            )}
          </div>
        </CardContent>
      </Card>

      {/* Linked Videos Section */}
      {videoRefs.length > 0 && (
        <Card>
          <CardHeader>
            <CardTitle className="text-lg flex items-center gap-2">
              <BookOpen className="h-5 w-5" />
              Reference Videos ({videoRefs.length})
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {videoRefs.map((video, index) => (
                <VideoReferenceCard
                  key={`${video.youtubeId}-${index}`}
                  video={video}
                  isExpanded={expandedVideo === `${video.youtubeId}-${index}`}
                  onToggleExpand={() => {
                    const key = `${video.youtubeId}-${index}`
                    setExpandedVideo(expandedVideo === key ? null : key)
                  }}
                  onWatch={() => onWatchVideo?.(video, video.timestamp)}
                  onSchedule={() => onScheduleVideo?.(video)}
                />
              ))}
            </div>
          </CardContent>
        </Card>
      )}

      {/* AI Suggestions and Learning Objectives */}
      {(todo.metadata?.learningObjectives || todo.aiSuggestion) && (
        <Card>
          <CardHeader>
            <CardTitle className="text-lg flex items-center gap-2">
              <Target className="h-5 w-5" />
              Learning Guide
            </CardTitle>
          </CardHeader>
          <CardContent>
            {todo.metadata?.learningObjectives && (
              <div className="mb-4">
                <h4 className="font-medium text-sm mb-2 flex items-center gap-2">
                  <Target className="h-4 w-4" />
                  Learning Objectives
                </h4>
                <ul className="space-y-1">
                  {todo.metadata.learningObjectives.map((objective: string, index: number) => (
                    <li key={index} className="text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2">
                      <Circle className="h-3 w-3 mt-1 flex-shrink-0" />
                      {objective}
                    </li>
                  ))}
                </ul>
              </div>
            )}

            {todo.aiSuggestion && (
              <div>
                <h4 className="font-medium text-sm mb-2 flex items-center gap-2">
                  <Lightbulb className="h-4 w-4" />
                  AI Recommendations
                </h4>
                <div className="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                  <p className="text-sm text-blue-900 dark:text-blue-100">
                    {todo.aiSuggestion.description}
                  </p>
                  {todo.aiSuggestion.prerequisites && todo.aiSuggestion.prerequisites.length > 0 && (
                    <div className="mt-2">
                      <p className="text-xs font-medium text-blue-800 dark:text-blue-200 mb-1">
                        Prerequisites:
                      </p>
                      <ul className="text-xs text-blue-700 dark:text-blue-300">
                        {todo.aiSuggestion.prerequisites.map((prereq, index) => (
                          <li key={index}>• {prereq}</li>
                        ))}
                      </ul>
                    </div>
                  )}
                </div>
              </div>
            )}
          </CardContent>
        </Card>
      )}
    </div>
  )
}

// Video Reference Card Component
interface VideoReferenceCardProps {
  video: UnifiedVideoReference
  isExpanded: boolean
  onToggleExpand: () => void
  onWatch: () => void
  onSchedule: () => void
}

const VideoReferenceCard: React.FC<VideoReferenceCardProps> = ({
  video,
  isExpanded,
  onToggleExpand,
  onWatch,
  onSchedule
}) => (
  <Card className="border border-gray-200 dark:border-gray-700">
    <CardContent className="p-4">
      <div className="flex gap-4">
        {/* Thumbnail */}
        <div className="flex-shrink-0">
          <img
            src={video.thumbnailUrl}
            alt={video.title}
            className="w-32 h-24 rounded object-cover cursor-pointer hover:opacity-80 transition-opacity"
            onClick={onWatch}
          />
        </div>
        
        {/* Content */}
        <div className="flex-1 min-w-0">
          <h5 className="font-medium text-base text-gray-900 dark:text-gray-100 mb-2 line-clamp-2">
            {video.title}
          </h5>
          
          <div className="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-3">
            {video.timestamp && (
              <div className="flex items-center gap-1">
                <Clock className="h-3 w-3" />
                <span>Start at {video.timestamp}</span>
              </div>
            )}
            
            {video.duration && (
              <div className="flex items-center gap-1">
                <Play className="h-3 w-3" />
                <span>{Math.ceil(video.duration / 60)} min</span>
              </div>
            )}
            
            {video.confidence && (
              <Badge variant="outline" className="text-xs">
                {Math.round(video.confidence * 100)}% match
              </Badge>
            )}
          </div>
          
          {/* Action Buttons */}
          <div className="flex gap-2">
            <Button size="sm" onClick={onWatch}>
              <Play className="h-3 w-3 mr-1" />
              Watch
            </Button>
            <Button size="sm" variant="outline" onClick={onSchedule}>
              <Calendar className="h-3 w-3 mr-1" />
              Schedule
            </Button>
            <Button size="sm" variant="ghost" onClick={onToggleExpand}>
              {isExpanded ? 'Less' : 'More'}
            </Button>
            {video.timestampUrl && (
              <Button size="sm" variant="ghost" asChild>
                <a href={video.timestampUrl} target="_blank" rel="noopener noreferrer">
                  <ExternalLink className="h-3 w-3 mr-1" />
                  YouTube
                </a>
              </Button>
            )}
          </div>
        </div>
      </div>
      
      {/* Expanded Details */}
      {isExpanded && video.relevantSegment && (
        <div className="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
          <h6 className="text-sm font-medium mb-2">Relevant Content:</h6>
          <p className="text-sm text-gray-600 dark:text-gray-400 p-3 bg-gray-50 dark:bg-gray-800 rounded">
            "{video.relevantSegment}"
          </p>
        </div>
      )}
    </CardContent>
  </Card>
)

// Helper function for priority badge colors
const getPriorityVariant = (priority: string) => {
  switch (priority) {
    case 'urgent': return 'destructive'
    case 'high': return 'default'
    case 'medium': return 'secondary'
    case 'low': return 'outline'
    default: return 'outline'
  }
}
```

### Task 3.3: Calendar Video Events (1 hour)
**File**: `src/components/calendar/VideoCalendarEvent.tsx`

Calendar events specifically for video learning sessions:

```tsx
import React from 'react'
import { Card, CardContent } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import { Button } from '@/components/ui/button'
import { 
  Play, 
  Clock, 
  Calendar,
  BookOpen,
  User,
  CheckCircle2,
  Circle,
  ExternalLink
} from 'lucide-react'
import type { UnifiedVideoReference } from '@/types/shared'

interface VideoCalendarEventProps {
  event: {
    id: string
    title: string
    description?: string
    startTime: string
    duration: number
    type: 'video_session' | 'practice' | 'review' | 'project'
    status: 'scheduled' | 'in_progress' | 'completed' | 'missed'
    videoReference?: UnifiedVideoReference
    progress?: number
    relatedTodos?: string[]
  }
  compact?: boolean
  onStartSession?: (event: any) => void
  onReschedule?: (event: any) => void
  onMarkComplete?: (event: any) => void
  onViewVideo?: (video: UnifiedVideoReference) => void
}

export const VideoCalendarEvent: React.FC<VideoCalendarEventProps> = ({
  event,
  compact = false,
  onStartSession,
  onReschedule,
  onMarkComplete,
  onViewVideo
}) => {
  if (event.type !== 'video_session') {
    return <StandardCalendarEvent event={event} compact={compact} />
  }

  const isUpcoming = new Date(event.startTime) > new Date()
  const isToday = new Date(event.startTime).toDateString() === new Date().toDateString()

  if (compact) {
    return <CompactVideoEvent event={event} onViewVideo={onViewVideo} />
  }

  return (
    <Card className={`
      ${getEventBorderColor(event.type, event.status)}
      ${isToday ? 'ring-2 ring-blue-200 dark:ring-blue-800' : ''}
    `}>
      <CardContent className="p-4">
        <div className="space-y-4">
          {/* Header */}
          <div className="flex justify-between items-start">
            <div className="flex-1 min-w-0">
              <div className="flex items-center gap-2 mb-2">
                {event.status === 'completed' ? (
                  <CheckCircle2 className="h-4 w-4 text-green-600" />
                ) : (
                  <Circle className="h-4 w-4 text-gray-400" />
                )}
                <h3 className="font-medium text-gray-900 dark:text-gray-100 line-clamp-1">
                  {event.title}
                </h3>
              </div>
              
              {event.description && (
                <p className="text-sm text-gray-600 dark:text-gray-400 line-clamp-2">
                  {event.description}
                </p>
              )}
            </div>
            
            <div className="flex items-center gap-1">
              <Badge variant={getStatusVariant(event.status)}>
                {event.status}
              </Badge>
              <Badge variant="outline">
                {event.type.replace('_', ' ')}
              </Badge>
            </div>
          </div>

          {/* Video Preview */}
          {event.videoReference && (
            <div className="flex gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
              <img
                src={event.videoReference.thumbnailUrl}
                alt={event.videoReference.title}
                className="w-20 h-15 rounded object-cover cursor-pointer hover:opacity-80"
                onClick={() => onViewVideo?.(event.videoReference!)}
              />
              
              <div className="flex-1 min-w-0">
                <h4 className="font-medium text-sm text-gray-900 dark:text-gray-100 line-clamp-1">
                  {event.videoReference.title}
                </h4>
                
                <div className="flex items-center gap-2 mt-1 text-xs text-gray-600 dark:text-gray-400">
                  {event.videoReference.timestamp && (
                    <>
                      <Clock className="h-3 w-3" />
                      <span>Start at {event.videoReference.timestamp}</span>
                    </>
                  )}
                  
                  {event.videoReference.creatorName && (
                    <>
                      <User className="h-3 w-3" />
                      <span>{event.videoReference.creatorName}</span>
                    </>
                  )}
                </div>
                
                {event.progress !== undefined && (
                  <div className="mt-2">
                    <div className="flex justify-between text-xs mb-1">
                      <span>Progress</span>
                      <span>{Math.round(event.progress)}%</span>
                    </div>
                    <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1">
                      <div 
                        className="bg-blue-600 h-1 rounded-full transition-all"
                        style={{ width: `${event.progress}%` }}
                      />
                    </div>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Event Details */}
          <div className="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
            <div className="flex items-center gap-1">
              <Calendar className="h-4 w-4" />
              <span>{new Date(event.startTime).toLocaleString()}</span>
            </div>
            
            <div className="flex items-center gap-1">
              <Clock className="h-4 w-4" />
              <span>{event.duration} minutes</span>
            </div>
            
            {event.relatedTodos && event.relatedTodos.length > 0 && (
              <div className="flex items-center gap-1">
                <BookOpen className="h-4 w-4" />
                <span>{event.relatedTodos.length} related tasks</span>
              </div>
            )}
          </div>

          {/* Action Buttons */}
          <div className="flex gap-2 pt-2 border-t border-gray-200 dark:border-gray-700">
            {event.status === 'scheduled' && (
              <>
                <Button 
                  size="sm" 
                  onClick={() => onStartSession?.(event)}
                  disabled={!isToday && !isUpcoming}
                >
                  <Play className="h-3 w-3 mr-1" />
                  Start Learning
                </Button>
                
                <Button 
                  size="sm" 
                  variant="outline" 
                  onClick={() => onReschedule?.(event)}
                >
                  <Calendar className="h-3 w-3 mr-1" />
                  Reschedule
                </Button>
              </>
            )}
            
            {event.status === 'in_progress' && (
              <>
                <Button size="sm" onClick={() => onMarkComplete?.(event)}>
                  <CheckCircle2 className="h-3 w-3 mr-1" />
                  Complete
                </Button>
                
                <Button size="sm" variant="outline" onClick={() => onViewVideo?.(event.videoReference!)}>
                  <Play className="h-3 w-3 mr-1" />
                  Continue
                </Button>
              </>
            )}
            
            {event.videoReference?.videoUrl && (
              <Button size="sm" variant="ghost" asChild>
                <a href={event.videoReference.videoUrl} target="_blank" rel="noopener noreferrer">
                  <ExternalLink className="h-3 w-3 mr-1" />
                  YouTube
                </a>
              </Button>
            )}
          </div>
        </div>
      </CardContent>
    </Card>
  )
}

// Compact version for calendar grid view
const CompactVideoEvent: React.FC<{
  event: any
  onViewVideo?: (video: UnifiedVideoReference) => void
}> = ({ event, onViewVideo }) => (
  <div 
    className={`
      p-2 rounded text-xs cursor-pointer hover:opacity-80 transition-opacity
      ${getEventBackgroundColor(event.type, event.status)}
    `}
    onClick={() => event.videoReference && onViewVideo?.(event.videoReference)}
  >
    <div className="flex items-center gap-1 mb-1">
      {event.status === 'completed' ? (
        <CheckCircle2 className="h-3 w-3 text-green-600" />
      ) : (
        <Play className="h-3 w-3 text-gray-600" />
      )}
      <span className="font-medium line-clamp-1">{event.title}</span>
    </div>
    
    <div className="flex items-center gap-1 text-gray-600 dark:text-gray-400">
      <Clock className="h-2 w-2" />
      <span>{event.duration}min</span>
      {event.videoReference?.timestamp && (
        <>
          <span>•</span>
          <span>@{event.videoReference.timestamp}</span>
        </>
      )}
    </div>
    
    {event.progress !== undefined && (
      <div className="mt-1 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1">
        <div 
          className="bg-blue-600 h-1 rounded-full"
          style={{ width: `${event.progress}%` }}
        />
      </div>
    )}
  </div>
)

// Standard calendar event for non-video events
const StandardCalendarEvent: React.FC<{
  event: any
  compact?: boolean
}> = ({ event, compact }) => (
  <div className={`p-2 rounded ${compact ? 'text-xs' : 'text-sm'}`}>
    <h4 className="font-medium">{event.title}</h4>
    {!compact && event.description && (
      <p className="text-gray-600 dark:text-gray-400 mt-1">{event.description}</p>
    )}
  </div>
)

// Helper functions
const getEventBorderColor = (type: string, status: string) => {
  if (status === 'completed') return 'border-l-4 border-l-green-500'
  if (status === 'missed') return 'border-l-4 border-l-red-500'
  if (type === 'video_session') return 'border-l-4 border-l-blue-500'
  return 'border-l-4 border-l-gray-300'
}

const getEventBackgroundColor = (type: string, status: string) => {
  if (status === 'completed') return 'bg-green-100 dark:bg-green-900/20 text-green-900 dark:text-green-100'
  if (status === 'missed') return 'bg-red-100 dark:bg-red-900/20 text-red-900 dark:text-red-100'
  if (type === 'video_session') return 'bg-blue-100 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100'
  return 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100'
}

const getStatusVariant = (status: string) => {
  switch (status) {
    case 'completed': return 'default'
    case 'in_progress': return 'secondary'
    case 'missed': return 'destructive'
    default: return 'outline'
  }
}
```

---

## 📁 File Structure You'll Create

```
src/
├── components/
│   ├── chat/
│   │   └── EnhancedChatMessage.tsx    ✨ NEW (Task 3.1)
│   ├── todo/
│   │   └── TodoDetailWithVideo.tsx    ✨ NEW (Task 3.2)
│   ├── calendar/
│   │   └── VideoCalendarEvent.tsx     ✨ NEW (Task 3.3)
│   └── integration/
│       ├── VideoCard.tsx              📝 Extracted from chat
│       ├── TodoSuggestionCard.tsx     📝 Extracted from chat
│       └── SchedulingCard.tsx         📝 Extracted from chat
```

---

## ✅ Success Criteria

Your UI components are complete when:

1. **All three components render** without errors
2. **Mock data displays** correctly in all views
3. **Interactive elements work** (buttons, toggles, etc.)
4. **Responsive design** works on mobile and desktop
5. **Accessibility features** included (ARIA labels, keyboard nav)
6. **Integration points** prepared for real data
7. **TypeScript compiles** (may use any temporarily)

---

## 🔄 Coordination Points

### Checkpoint 1 (45 minutes)
Share component interfaces with Agent 1 for type validation

### Checkpoint 2 (1.5 hours)
Coordinate with Agent 2 on service integration points

### Checkpoint 3 (2.5 hours)
Validate components with Agent 4 for testing requirements

### Final (3 hours)
Polish components and ensure real data integration works

---

## 🎨 Design Guidelines

### Visual Hierarchy:
- **Primary actions**: Solid buttons (blue)
- **Secondary actions**: Outline buttons
- **Tertiary actions**: Ghost buttons
- **Status indicators**: Color-coded badges

### Colors & States:
- **Video elements**: Blue theme
- **Todo elements**: Green theme  
- **Calendar elements**: Purple theme
- **AI suggestions**: Subtle blue background
- **Completed items**: Green indicators
- **Pending items**: Gray indicators

### Responsive Breakpoints:
```css
sm: 640px   /* Mobile landscape */
md: 768px   /* Tablet */
lg: 1024px  /* Desktop */
xl: 1280px  /* Large desktop */
```

---

## 🚀 Getting Started

1. Create component files with basic structure
2. Add mock data and types (use any for now)
3. Build UI layout and styling
4. Add interactive functionality
5. Prepare integration points for real data
6. Test responsive behavior

---

## ⚠️ Important Notes

- **Use existing UI components** from `/src/components/ui/`
- **Follow Tailwind classes** for consistency
- **Add proper TypeScript** even with temporary types
- **Include accessibility** attributes
- **Handle loading states** and empty states
- **Test with mock data** first

---

## 🎯 Deliverables Checklist

- [ ] `EnhancedChatMessage.tsx` with video actions
- [ ] `TodoDetailWithVideo.tsx` with video links
- [ ] `VideoCalendarEvent.tsx` with video sessions
- [ ] All components responsive and accessible
- [ ] Mock data rendering correctly
- [ ] Integration points prepared
- [ ] Coordination checkpoints completed

---

**Agent 3 Ready to Deploy!**
Focus on creating intuitive, beautiful UI components that users will love to interact with!